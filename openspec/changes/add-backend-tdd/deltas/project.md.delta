# Delta: project.md

## Location: After "## External Dependencies" section

### Add new section: "## Backend Architecture"

```markdown
## Backend Architecture

### Tech Stack
- **Runtime**: Node.js with TypeScript
- **Framework**: Express.js
- **Database**: SQLite with better-sqlite3
- **Authentication**: JWT tokens
- **Testing**: Vitest

### Directory Structure
```
├── server/
│   ├── src/
│   │   ├── index.ts            # Entry point
│   │   ├── app.ts              # Express configuration
│   │   ├── db/                 # Database layer
│   │   ├── routes/             # API route handlers
│   │   ├── services/           # Business logic
│   │   ├── middleware/         # Express middleware
│   │   └── types/              # TypeScript types
│   └── tests/                  # Vitest test files
```

### API Conventions
- All endpoints prefixed with `/api`
- Response format: `{ success: boolean, data?: T, message?: string }`
- Authentication via `Authorization: Bearer <token>` header
- Pagination: `?page=1&pageSize=20`

### Development
- Backend runs on port 3001
- Frontend connects via `VITE_API_URL` environment variable
- Database file stored at `server/data/sanctuary.db`
```

## Location: Update "## External Dependencies" section

### Modify to include local backend

```markdown
## External Dependencies
- **Local Backend**: Express.js API server (port 3001) with SQLite
- **Gemini API**: Google's AI API (requires `GEMINI_API_KEY`)
- **Google Images CDN**: External image hosting (lh3.googleusercontent.com)
```

## Location: Update "## Key Files" section

### Add backend key files

```markdown
## Key Files
- `index.css` - Tailwind theme configuration and custom styles
- `App.tsx` - Root component with context providers and routing
- `shared/types/index.ts` - Core business types (User, Space, Memory, Milestone)
- `shared/context/` - Global state management
- `shared/api/client.ts` - API client for backend communication
- `server/src/app.ts` - Express application setup
- `server/src/db/schema.sql` - Database schema definition
```
